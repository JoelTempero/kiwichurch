<!DOCTYPE html>
<html lang="en-NZ">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Primary Meta Tags -->
    <title>Resources - Kiwi Church | Helpful Links & Documents</title>
    <meta name="title" content="Resources - Kiwi Church | Helpful Links & Documents">
    <meta name="description" content="Access Kiwi Church resources including Zoom links, shared documents, recommended reading, and helpful tools for your faith journey.">
    <meta name="keywords" content="church resources, Christian resources NZ, faith resources, church documents">
    <meta name="author" content="Kiwi Church">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://kiwichurch.org.nz/resources.html">

    <!-- Theme & App Meta -->
    <meta name="theme-color" content="#1a3a2f">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Kiwi Church">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://kiwichurch.org.nz/resources.html">
    <meta property="og:title" content="Resources - Kiwi Church">
    <meta property="og:description" content="Access Kiwi Church resources including Zoom links, shared documents, and helpful tools.">
    <meta property="og:image" content="https://kiwichurch.org.nz/images/og-image.jpg">
    <meta property="og:locale" content="en_NZ">
    <meta property="og:site_name" content="Kiwi Church">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://kiwichurch.org.nz/resources.html">
    <meta name="twitter:title" content="Resources - Kiwi Church">
    <meta name="twitter:description" content="Access Kiwi Church resources including Zoom links, shared documents, and helpful tools.">
    <meta name="twitter:image" content="https://kiwichurch.org.nz/images/og-image.jpg">

    <!-- Favicon & Icons -->
    <link rel="icon" type="image/png" href="icons/icon-192.png">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="manifest" href="manifest.json">

    <!-- Preconnect & Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400;1,500&family=Nunito+Sans:ital,opsz,wght@0,6..12,300;0,6..12,400;0,6..12,500;0,6..12,600;1,6..12,400&display=swap" rel="stylesheet">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/styles.css">

    <style>
        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        .resource-card {
            background: var(--color-white);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-base);
        }
        .resource-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }
        .resource-icon {
            width: 48px;
            height: 48px;
            background: var(--color-sage-light);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
        }
        .resource-icon svg {
            width: 24px;
            height: 24px;
            color: var(--color-forest);
        }
        .resource-card h3 {
            margin-bottom: 0.5rem;
        }
        .resource-card p {
            color: var(--color-text-light);
            font-size: 0.9375rem;
            margin-bottom: 1rem;
        }

        /* Category Tabs */
        .category-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 2rem;
            justify-content: center;
        }
        .category-tab {
            padding: 0.625rem 1.25rem;
            border: 1px solid var(--color-border);
            border-radius: var(--radius-full);
            background: var(--color-white);
            color: var(--color-text);
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-base);
        }
        .category-tab:hover {
            border-color: var(--color-forest);
            color: var(--color-forest);
        }
        .category-tab.active {
            background: var(--color-forest);
            border-color: var(--color-forest);
            color: white;
        }

        /* Search Box */
        .resource-search {
            max-width: 500px;
            margin: 0 auto 2rem;
        }
        .resource-search input {
            width: 100%;
            padding: 0.875rem 1.25rem;
            border: 1px solid var(--color-border);
            border-radius: var(--radius-full);
            font-size: 1rem;
            transition: all var(--transition-base);
        }
        .resource-search input:focus {
            outline: none;
            border-color: var(--color-forest);
            box-shadow: 0 0 0 3px rgba(26, 58, 47, 0.1);
        }

        /* Getting Started Section */
        .getting-started {
            background: linear-gradient(135deg, var(--color-forest) 0%, var(--color-sage) 100%);
            color: white;
            padding: 3rem 2rem;
            border-radius: var(--radius-xl);
            margin-bottom: 3rem;
        }
        .getting-started h2 {
            color: white;
            margin-bottom: 1rem;
        }
        .getting-started p {
            opacity: 0.9;
            margin-bottom: 1.5rem;
            max-width: 600px;
        }
        .getting-started-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        .getting-started-step {
            background: rgba(255, 255, 255, 0.15);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            text-align: center;
        }
        .step-number {
            width: 40px;
            height: 40px;
            background: white;
            color: var(--color-forest);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.125rem;
            margin: 0 auto 1rem;
        }
        .getting-started-step h4 {
            color: white;
            margin-bottom: 0.5rem;
        }
        .getting-started-step p {
            font-size: 0.875rem;
            margin-bottom: 0;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 3rem;
            color: var(--color-text-light);
        }
        .empty-state svg {
            width: 64px;
            height: 64px;
            opacity: 0.5;
            margin-bottom: 1rem;
        }

        /* Resource Type Badge */
        .resource-type {
            display: inline-block;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 0.25rem 0.5rem;
            border-radius: var(--radius-sm);
            background: var(--color-sage-light);
            color: var(--color-forest);
            margin-bottom: 0.75rem;
        }
        .resource-type.external { background: #e8f4fd; color: #1e88e5; }
        .resource-type.download { background: #fef3e8; color: #e65100; }
        .resource-type.video { background: #fce4ec; color: #c2185b; }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header scrolled" id="header">
        <div class="header-inner">
            <a href="index.html" class="header-logo">
                <img src="KiwiChurch_Old_White_Shadow.png" alt="Kiwi Church Logo">
            </a>

            <nav class="nav-desktop" id="nav-desktop" aria-label="Main navigation">
                <a href="index.html" class="nav-link">Home</a>
                <a href="about.html" class="nav-link">About</a>
                <a href="communities.html" class="nav-link">Communities</a>
                <a href="calendar.html" class="nav-link">Calendar</a>
                <a href="kete.html" class="nav-link">Kete</a>
                <a href="resources.html" class="nav-link active">Resources</a>
                
                <a href="portal.html" class="btn btn-outline">Portal</a>
            </nav>

            <button class="mobile-menu-btn" id="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Toggle mobile menu">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
            </button>
        </div>
    </header>

    <!-- Mobile Navigation -->
    <nav class="mobile-nav" id="mobile-nav" aria-label="Mobile navigation">
        <a href="index.html" class="mobile-nav-link">Home</a>
        <a href="about.html" class="mobile-nav-link">About</a>
        <a href="communities.html" class="mobile-nav-link">Communities</a>
        <a href="calendar.html" class="mobile-nav-link">Calendar</a>
        <a href="kete.html" class="mobile-nav-link">Kete</a>
        <a href="resources.html" class="mobile-nav-link">Resources</a>
        
        <a href="portal.html" class="mobile-nav-link">Member Portal</a>
    </nav>

    <!-- Main Content -->
    <main id="main">
        <!-- Hero Section -->
        <section class="about-hero" aria-labelledby="resources-heading">
            <div class="about-hero-content">
                <h1 id="resources-heading">Resources</h1>
                <p>Helpful links and documents for our community</p>
            </div>
        </section>

        <!-- Getting Started Section -->
        <section class="section" aria-labelledby="getting-started-heading">
            <div class="container">
                <div class="getting-started">
                    <span class="section-label" style="color: rgba(255,255,255,0.8);">New Here?</span>
                    <h2 id="getting-started-heading">Getting Started with Kiwi Church</h2>
                    <p>Welcome! We're so glad you're exploring our community. Here's how to take your first steps with us.</p>

                    <div class="getting-started-steps">
                        <div class="getting-started-step">
                            <div class="step-number">1</div>
                            <h4>Visit a Gathering</h4>
                            <p>Join one of our open gatherings to meet the community and see what we're about.</p>
                        </div>
                        <div class="getting-started-step">
                            <div class="step-number">2</div>
                            <h4>Connect Online</h4>
                            <p>Join our online prayer meetings or check out our Kete for resources and reflections.</p>
                        </div>
                        <div class="getting-started-step">
                            <div class="step-number">3</div>
                            <h4>Find Your Community</h4>
                            <p>Explore our different communities and find one that fits your rhythm of life.</p>
                        </div>
                        <div class="getting-started-step">
                            <div class="step-number">4</div>
                            <h4>Get Involved</h4>
                            <p>Once you're settled, there are many ways to contribute and grow with us.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- All Resources Section -->
        <section class="section section-compact-top" aria-labelledby="all-resources-heading">
            <div class="container">
                <div class="section-header">
                    <span class="section-label">Browse</span>
                    <h2 class="section-title" id="all-resources-heading">All Resources</h2>
                    <p class="section-desc">Find what you need to support your faith journey.</p>
                </div>

                <!-- Search -->
                <div class="resource-search">
                    <input type="text" id="resource-search-input" placeholder="Search resources..." oninput="filterResources()">
                </div>

                <!-- Category Tabs -->
                <div class="category-tabs" id="category-tabs">
                    <button class="category-tab active" data-category="all" onclick="setCategory('all')">All</button>
                    <button class="category-tab" data-category="links" onclick="setCategory('links')">Quick Links</button>
                    <button class="category-tab" data-category="reading" onclick="setCategory('reading')">Reading</button>
                    <button class="category-tab" data-category="prayer" onclick="setCategory('prayer')">Prayer & Practice</button>
                    <button class="category-tab" data-category="media" onclick="setCategory('media')">Media</button>
                </div>

                <!-- Resources Grid -->
                <div class="resources-grid" id="resources-grid">
                    <!-- Resources will be loaded dynamically -->
                </div>

                <!-- Empty State -->
                <div class="empty-state" id="empty-state" style="display: none;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                    <p>No resources found matching your search.</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-brand">
                <img src="KiwiChurch_Old_White_Shadow.png" alt="Kiwi Church">
                <p>A network of small group Christian communities in Christchurch, New Zealand.</p>
            </div>
            <div class="footer-nav">
                <h4 class="footer-title">Explore</h4>
                <ul class="footer-links">
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="communities.html">Communities</a></li>
                    <li><a href="calendar.html">Calendar</a></li>
                    <li><a href="kete.html">Kete</a></li>
                </ul>
            </div>
            <div class="footer-nav">
                <h4 class="footer-title">Connect</h4>
                <ul class="footer-links">
                    <li><a href="resources.html">Resources</a></li>
                    
                    <li><a href="portal.html">Member Portal</a></li>
                </ul>
            </div>
            <div class="footer-contact-section">
                <h4 class="footer-title">Contact</h4>
                <div class="footer-contact">
                    <p>Christchurch, New Zealand</p>
                    <p><a href="mailto:hello@kiwichurch.org.nz">hello@kiwichurch.org.nz</a></p>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Kiwi Church. All rights reserved.</p>
        </div>
    </footer>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container" aria-live="polite"></div>

    <!-- Scripts -->
    <script src="js/main.js"></script>
    <script type="module">
        // Firebase imports
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js';
        import { getFirestore, collection, getDocs, query, where, orderBy } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js';

        // Firebase config - must match portal's firebase-config.js
        const firebaseConfig = {
            apiKey: "AIzaSyDbGRbr1D2difpQWfxoZqPy58FmNrQ2HbA",
            authDomain: "kiwichurch-1ef0f.firebaseapp.com",
            projectId: "kiwichurch-1ef0f",
            storageBucket: "kiwichurch-1ef0f.firebasestorage.app",
            messagingSenderId: "295588695621",
            appId: "1:295588695621:web:7320e07a05229564a45d2c"
        };

        // Fallback resources data
        const fallbackResources = [
            {
                id: '1',
                title: 'Online Prayer Zoom',
                description: 'Join our regular online prayer gatherings via Zoom.',
                category: 'links',
                type: 'link',
                url: '#',
                icon: 'arrow-right',
                order: 1
            },
            {
                id: '2',
                title: 'Shared Calendar',
                description: 'Subscribe to our community calendar in your preferred app.',
                category: 'links',
                type: 'link',
                url: 'calendar.html',
                icon: 'calendar',
                order: 2
            },
            {
                id: '3',
                title: 'Shared Documents',
                description: 'Access community documents, study guides, and resources.',
                category: 'links',
                type: 'link',
                url: '#',
                icon: 'document',
                order: 3
            },
            {
                id: '4',
                title: 'Daily Lectionary',
                description: 'Follow along with daily scripture readings from the lectionary.',
                category: 'links',
                type: 'external',
                url: 'https://lectionary.library.vanderbilt.edu/',
                icon: 'book',
                order: 4
            },
            {
                id: '5',
                title: 'The Ruthless Elimination of Hurry',
                description: 'John Mark Comer - On slowing down and practicing presence in a busy world.',
                category: 'reading',
                type: 'book',
                author: 'John Mark Comer',
                order: 5
            },
            {
                id: '6',
                title: 'Life Together',
                description: 'Dietrich Bonhoeffer - A classic on Christian community and shared life.',
                category: 'reading',
                type: 'book',
                author: 'Dietrich Bonhoeffer',
                order: 6
            },
            {
                id: '7',
                title: 'The Celtic Way of Evangelism',
                description: 'George Hunter III - Insights from Celtic Christianity for today.',
                category: 'reading',
                type: 'book',
                author: 'George Hunter III',
                order: 7
            },
            {
                id: '8',
                title: 'Simply Christian',
                description: 'N.T. Wright - An accessible introduction to Christianity.',
                category: 'reading',
                type: 'book',
                author: 'N.T. Wright',
                order: 8
            },
            {
                id: '9',
                title: 'Daily Prayer Office',
                description: 'A simple morning and evening prayer structure you can use at home.',
                category: 'prayer',
                type: 'download',
                url: '#',
                icon: 'clock',
                order: 9
            },
            {
                id: '10',
                title: 'Lectio 365',
                description: 'We recommend Lectio 365 and Pray As You Go for daily prayer.',
                category: 'prayer',
                type: 'external',
                url: 'https://www.24-7prayer.com/resource/lectio-365/',
                icon: 'bell',
                order: 10
            },
            {
                id: '11',
                title: 'Examen Guide',
                description: 'Learn the ancient practice of Ignatian Examen for daily reflection.',
                category: 'prayer',
                type: 'download',
                url: '#',
                icon: 'document',
                order: 11
            },
            {
                id: '12',
                title: 'The Bible Project',
                description: 'Excellent animated videos exploring the books and themes of the Bible.',
                category: 'media',
                type: 'video',
                url: 'https://bibleproject.com/',
                icon: 'video',
                order: 12
            },
            {
                id: '13',
                title: 'Podcasts We Love',
                description: 'A curated list of podcasts for spiritual growth and theological exploration.',
                category: 'media',
                type: 'link',
                url: '#',
                icon: 'headphones',
                order: 13
            }
        ];

        // State
        let resources = fallbackResources;
        let selectedCategory = 'all';
        let searchQuery = '';

        // Initialize Firebase and load resources
        async function loadFromFirebase() {
            try {
                const app = initializeApp(firebaseConfig);
                const db = getFirestore(app);
                const resourcesRef = collection(db, 'resources');
                const q = query(resourcesRef, orderBy('order', 'asc'));
                const snapshot = await getDocs(q);

                if (!snapshot.empty) {
                    resources = snapshot.docs.map(doc => ({
                        id: doc.id,
                        ...doc.data()
                    }));
                }
            } catch (error) {
                console.log('Using fallback resources data:', error.message);
            }
            renderResources();
        }

        // Icons SVG paths
        const icons = {
            'arrow-right': '<path d="M15 10l5 5-5 5"></path><path d="M4 4v7a4 4 0 0 0 4 4h12"></path>',
            'calendar': '<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line>',
            'document': '<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line>',
            'book': '<path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>',
            'clock': '<path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"></path><path d="M12 6v6l4 2"></path>',
            'bell': '<path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path>',
            'video': '<polygon points="23 7 16 12 23 17 23 7"></polygon><rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>',
            'headphones': '<path d="M3 18v-6a9 9 0 0 1 18 0v6"></path><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"></path>'
        };

        // Get icon background color based on category
        function getIconBg(category) {
            const colors = {
                'links': 'var(--color-sage-light)',
                'reading': 'var(--color-gold-light, #fef9e8)',
                'prayer': 'var(--color-terracotta-light)',
                'media': '#e8f4fd'
            };
            return colors[category] || 'var(--color-sage-light)';
        }

        // Get type badge class
        function getTypeBadge(type) {
            const badges = {
                'external': 'external',
                'download': 'download',
                'video': 'video'
            };
            return badges[type] || '';
        }

        // Render resources
        function renderResources() {
            const grid = document.getElementById('resources-grid');
            const emptyState = document.getElementById('empty-state');

            // Filter resources
            let filtered = resources;

            if (selectedCategory !== 'all') {
                filtered = filtered.filter(r => r.category === selectedCategory);
            }

            if (searchQuery) {
                const query = searchQuery.toLowerCase();
                filtered = filtered.filter(r =>
                    r.title.toLowerCase().includes(query) ||
                    r.description.toLowerCase().includes(query) ||
                    (r.author && r.author.toLowerCase().includes(query))
                );
            }

            if (filtered.length === 0) {
                grid.innerHTML = '';
                emptyState.style.display = 'block';
                return;
            }

            emptyState.style.display = 'none';

            grid.innerHTML = filtered.map(resource => {
                const iconSvg = icons[resource.icon] || icons['document'];
                const iconBg = getIconBg(resource.category);
                const typeBadge = getTypeBadge(resource.type);
                const isExternal = resource.type === 'external' || (resource.url && resource.url.startsWith('http'));

                let actionButton = '';
                if (resource.url) {
                    const buttonText = resource.type === 'download' ? 'Download' :
                                      resource.type === 'video' ? 'Watch' :
                                      resource.type === 'book' ? 'Learn More' : 'View';
                    actionButton = `<a href="${resource.url}" ${isExternal ? 'target="_blank" rel="noopener"' : ''} class="btn btn-primary btn-sm">${buttonText}</a>`;
                }

                return `
                    <div class="resource-card">
                        ${resource.icon ? `
                        <div class="resource-icon" style="background: ${iconBg};">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                ${iconSvg}
                            </svg>
                        </div>
                        ` : ''}
                        ${typeBadge ? `<span class="resource-type ${typeBadge}">${resource.type}</span>` : ''}
                        <h3>${resource.title}</h3>
                        <p>${resource.description}</p>
                        ${actionButton}
                    </div>
                `;
            }).join('');
        }

        // Set category filter
        window.setCategory = function(category) {
            selectedCategory = category;

            // Update tab styling
            document.querySelectorAll('.category-tab').forEach(tab => {
                tab.classList.toggle('active', tab.dataset.category === category);
            });

            renderResources();
        };

        // Filter resources by search
        window.filterResources = function() {
            searchQuery = document.getElementById('resource-search-input').value;
            renderResources();
        };

        // Initialize
        loadFromFirebase();
    </script>
</body>
</html>
